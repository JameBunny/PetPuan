<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard ‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <style>
        :root { --primary: #FF9F1C; --success: #2EC4B6; --dark: #2B2D42; --danger: #FF4757; --grey: #ccc; }
        body { font-family: 'Kanit', sans-serif; background: #f0f2f5; margin: 0; padding-bottom: 90px; }

        /* --- Header --- */
        .header { background: var(--dark); padding: 25px 20px 40px; color: white; border-radius: 0 0 30px 30px; display: flex; align-items: center; gap: 15px; position: relative; }
        .profile-img { width: 70px; height: 70px; border-radius: 50%; border: 3px solid white; object-fit: cover; }
        .user-info h2 { margin: 0; font-size: 1.2rem; }
        .user-info p { margin: 0; font-size: 0.9rem; opacity: 0.8; }
        
        /* --- Container --- */
        .container { padding: 0 20px; max-width: 600px; margin: -30px auto 0; position: relative; }

        /* --- Status Toggle (‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô) --- */
        .status-card { background: white; padding: 15px 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.08); display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .toggle-switch { position: relative; width: 50px; height: 26px; border-radius: 20px; background: var(--grey); cursor: pointer; transition: 0.3s; }
        .toggle-switch::after { content: ''; position: absolute; width: 22px; height: 22px; background: white; border-radius: 50%; top: 2px; left: 2px; transition: 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        
        /* Active State */
        .toggle-switch.active { background: var(--success); }
        .toggle-switch.active::after { left: 26px; }

        /* --- Stats Grid --- */
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .stat-card { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .stat-card h3 { margin: 0; font-size: 1.8rem; color: var(--primary); }
        .stat-card p { margin: 5px 0 0; color: #666; font-size: 0.9rem; }

        /* --- House Gallery (‡∏£‡∏π‡∏õ‡∏ö‡πâ‡∏≤‡∏ô) --- */
        .gallery-section { margin-bottom: 20px; }
        .section-title { font-size: 1rem; font-weight: bold; margin-bottom: 10px; color: #444; }
        .gallery-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; }
        .gallery-img { width: 120px; height: 90px; border-radius: 10px; object-fit: cover; flex-shrink: 0; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* --- Job Request (‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤) --- */
        .job-card { background: white; border-radius: 15px; padding: 20px; border-left: 5px solid var(--danger); box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: none; animation: slideUp 0.5s; }
        .btn-accept { width: 100%; background: var(--success); color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; margin-top: 10px; cursor: pointer; font-size: 1rem; }
        .btn-accept:active { transform: scale(0.98); }

        /* --- Menu List --- */
        .menu-list { background: white; border-radius: 15px; margin-top: 20px; overflow: hidden; }
        .menu-item { display: flex; justify-content: space-between; padding: 15px 20px; border-bottom: 1px solid #eee; cursor: pointer; color: #333; text-decoration: none; }

        /* --- Modal (‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç) --- */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 400px; padding: 25px; border-radius: 20px; position: relative; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-group input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        .btn-save { width: 100%; background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .close-btn { position: absolute; top: 15px; right: 15px; font-size: 1.5rem; cursor: pointer; }

        /* Bottom Nav */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 15px 0; box-shadow: 0 -2px 10px rgba(0,0,0,0.05); z-index: 100; }
        .nav-item { text-align: center; color: #999; font-size: 0.8rem; text-decoration: none; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 1.2rem; display: block; margin-bottom: 4px; }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body>

    <div class="header">
        <img id="displayImg" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" class="profile-img">
        <div class="user-info">
            <h2 id="displayName">‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á (Guest)</h2>
            <p><i class="fas fa-map-marker-alt"></i> <span id="displayLoc">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø</span></p>
        </div>
    </div>

    <div class="container">
        <div class="status-card">
            <span id="statusText" style="font-weight:bold; color:var(--grey);">üî¥ ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</span>
            <div class="toggle-switch" id="statusSwitch" onclick="toggleStatus()"></div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="jobCount">0</h3>
                <p>‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
            </div>
            <div class="stat-card">
                <h3>‡∏ø<span id="incomeCount">0</span></h3>
                <p>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°</p>
            </div>
        </div>

        <div class="gallery-section">
            <div class="section-title">üè† ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ö‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
            <div class="gallery-scroll">
                <img src="https://images.unsplash.com/photo-1587582423116-ec07293f0395?auto=format&fit=crop&w=200&q=80" class="gallery-img">
                <img src="https://images.unsplash.com/photo-1599388174483-e02fb8052140?auto=format&fit=crop&w=200&q=80" class="gallery-img">
                <img src="https://images.unsplash.com/photo-1605276374104-dee2a0ed3cd6?auto=format&fit=crop&w=200&q=80" class="gallery-img">
                <img src="https://images.unsplash.com/photo-1563911302283-d2bc129e7c1f?auto=format&fit=crop&w=200&q=80" class="gallery-img">
            </div>
        </div>

        <div class="job-card" id="jobAlert">
            <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                <strong>üî• ‡∏á‡∏≤‡∏ô‡∏î‡πà‡∏ß‡∏ô! ‡∏ù‡∏≤‡∏Å‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á 2 ‡∏ß‡∏±‡∏ô</strong>
                <span style="color:#999; font-size:0.8rem;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏µ‡πâ</span>
            </div>
            <div style="display:flex; gap:10px; align-items:center; background:#f9f9f9; padding:10px; border-radius:10px;">
                <img src="https://images.unsplash.com/photo-1543466835-00a7907e9de1?auto=format&fit=crop&w=100&q=80" style="width:50px; height:50px; border-radius:50%; object-fit:cover;">
                <div>
                    <div>‡∏ô‡πâ‡∏≠‡∏á‡∏Å‡∏∞‡∏ó‡∏¥ (Beagle)</div>
                    <div style="color:var(--primary); font-weight:bold;">‡∏Ñ‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÅ‡∏ó‡∏ô ‡∏ø800</div>
                </div>
            </div>
            <button class="btn-accept" onclick="acceptJob()">‚úÖ ‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</button>
        </div>

        <div class="menu-list">
            <div class="menu-item" onclick="openEditModal()">
                <span><i class="fas fa-edit" style="color:var(--primary); width:25px;"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</span>
                <i class="fas fa-chevron-right" style="color:#ccc;"></i>
            </div>
            <div class="menu-item">
                <span><i class="fas fa-history" style="color:var(--success); width:25px;"></i> ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</span>
                <i class="fas fa-chevron-right" style="color:#ccc;"></i>
            </div>
            <a href="index.html" class="menu-item" style="color:var(--danger);">
                <span><i class="fas fa-sign-out-alt" style="width:25px;"></i> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
            </a>
        </div>
    </div>

    <div class="modal" id="editModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeEditModal()">&times;</span>
            <h3 style="margin-top:0;">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h3>
            
            <div class="form-group">
                <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÅ‡∏™‡∏î‡∏á</label>
                <input type="text" id="inputName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏µ‡πà‡∏à‡∏≠‡∏¢ ‡∏£‡∏±‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå">
            </div>
            <div class="form-group">
                <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏Ç‡∏ï</label>
                <input type="text" id="inputLoc" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏î‡∏û‡∏£‡πâ‡∏≤‡∏ß">
            </div>
            <div class="form-group">
                <label>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ö‡πâ‡∏≤‡∏ô (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ)</label>
                <button style="width:100%; padding:10px; border:1px dashed #ccc; background:white; color:#666; border-radius:8px;" onclick="Swal.fire('‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î', '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏•‡∏±‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á', 'info')">
                    <i class="fas fa-camera"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                </button>
            </div>
            
            <button class="btn-save" onclick="saveProfile()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </div>
    </div>

    <div class="bottom-nav">
        <a href="#" class="nav-item active"><i class="fas fa-home"></i> ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="#" class="nav-item"><i class="fas fa-calendar-alt"></i> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏á‡∏≤‡∏ô</a>
        <a href="#" class="nav-item"><i class="fas fa-comment-dots"></i> ‡πÅ‡∏ä‡∏ó</a>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        // --- 1. ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ---
        document.addEventListener("DOMContentLoaded", function() {
            loadProfile(); // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡∏∑‡πà‡∏≠/‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
            
            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡πâ‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà)
            setTimeout(() => {
                if(localStorage.getItem('isOnline') === 'true') {
                    document.getElementById('jobAlert').style.display = 'block';
                    // ‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                    if(navigator.vibrate) navigator.vibrate([200, 100, 200]);
                }
            }, 1500);

            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            initializeLiff();
        });

        // --- 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (‡∏à‡∏≥‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á) ---
        function toggleStatus() {
            const btn = document.getElementById('statusSwitch');
            const txt = document.getElementById('statusText');
            
            btn.classList.toggle('active');
            
            if (btn.classList.contains('active')) {
                txt.innerHTML = '<span style="color:var(--success)">üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</span>';
                localStorage.setItem('isOnline', 'true');
                
                // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏ß‡∏¢‡πÜ
                Swal.fire({
                    icon: 'success',
                    title: '‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß',
                    text: '‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô! ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤',
                    timer: 1500,
                    showConfirmButton: false
                });
            } else {
                txt.innerHTML = '<span style="color:var(--grey)">üî¥ ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</span>';
                localStorage.setItem('isOnline', 'false');
                document.getElementById('jobAlert').style.display = 'none'; // ‡∏ã‡πà‡∏≠‡∏ô‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏õ‡∏¥‡∏î
            }
        }

        // --- 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô (‡∏Å‡∏î‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÑ‡∏•‡∏ô‡πå‡∏à‡∏£‡∏¥‡∏á) ---
        async function acceptJob() {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏á‡∏≤‡∏ô
            document.getElementById('jobAlert').style.display = 'none';
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ (‡∏à‡∏≥‡∏•‡∏≠‡∏á)
            let jobs = parseInt(document.getElementById('jobCount').innerText) + 1;
            let income = parseInt(document.getElementById('incomeCount').innerText) + 800;
            document.getElementById('jobCount').innerText = jobs;
            document.getElementById('incomeCount').innerText = income;

            // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
            Swal.fire({
                icon: 'success',
                title: '‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó...',
                showConfirmButton: false,
                timer: 2000
            });

            // *** ‡∏ó‡∏µ‡πÄ‡∏î‡πá‡∏î: ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤ LINE Chat ‡∏à‡∏£‡∏¥‡∏á‡πÜ ***
            // (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏ú‡πà‡∏≤‡∏ô LIFF ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô)
            if (liff.isInClient()) {
                try {
                    await liff.sendMessages([
                        {
                            type: 'text',
                            text: '‚úÖ ‡∏â‡∏±‡∏ô‡∏Å‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô "‡∏ô‡πâ‡∏≠‡∏á‡∏Å‡∏∞‡∏ó‡∏¥" ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞! \n‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö'
                        },
                        {
                            type: 'sticker',
                            packageId: '446',
                            stickerId: '1988'
                        }
                    ]);
                    console.log('Message sent');
                } catch (err) {
                    console.log('Error sending message:', err);
                }
            }
        }

        // --- 4. ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á) ---
        function loadProfile() {
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å LocalStorage
            const savedName = localStorage.getItem('sitterName');
            const savedLoc = localStorage.getItem('sitterLoc');
            const isOnline = localStorage.getItem('isOnline');

            if(savedName) document.getElementById('displayName').innerText = savedName;
            if(savedLoc) document.getElementById('displayLoc').innerText = savedLoc;

            // ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î‡∏á‡∏≤‡∏ô
            if(isOnline === 'true') {
                document.getElementById('statusSwitch').classList.add('active');
                document.getElementById('statusText').innerHTML = '<span style="color:var(--success)">üü¢ ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà</span>';
            }
        }

        function saveProfile() {
            const name = document.getElementById('inputName').value;
            const loc = document.getElementById('inputLoc').value;

            if(name) {
                document.getElementById('displayName').innerText = name;
                localStorage.setItem('sitterName', name);
            }
            if(loc) {
                document.getElementById('displayLoc').innerText = loc;
                localStorage.setItem('sitterLoc', loc);
            }

            closeEditModal();
            Swal.fire('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }

        function openEditModal() {
            document.getElementById('editModal').style.display = 'flex';
            // ‡πÉ‡∏™‡πà‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á
            document.getElementById('inputName').value = document.getElementById('displayName').innerText;
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // --- LIFF Init ---
        async function initializeLiff() {
            try {
                await liff.init({ liffId: "2008873687-FSXDQJEA" }); // ‡πÉ‡∏™‡πà ID ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                if (liff.isLoggedIn()) {
                    const profile = await liff.getProfile();
                    // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏á ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏•‡∏ô‡πå
                    if(!localStorage.getItem('sitterName')) {
                        document.getElementById('displayName').innerText = profile.displayName;
                    }
                    document.getElementById('displayImg').src = profile.pictureUrl;
                }
            } catch (err) {
                console.error(err);
            }
        }
    </script>
</body>
</html>
